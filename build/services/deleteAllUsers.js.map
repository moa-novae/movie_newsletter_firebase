{"version":3,"sources":["../../src/services/deleteAllUsers.js"],"names":["require","config","serviceAccount","JSON","parse","process","env","deleteAllUsers","nextPageToken","admin","initializeApp","credential","cert","databaseURL","auth","listUsers","then","listUsersResult","users","forEach","userRecord","deleteUser","toJSON","uid","pageToken","console","log","catch","error"],"mappings":";;AAAA;;;;;;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,IAAMC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWC,OAAO,CAACC,GAAR,CAAYJ,cAAvB,CAAvB;;AACA,SAASK,cAAT,CAAwBC,aAAxB,EAAuC;AACrCC,EAAAA,KAAK,CAACC,aAAN,CAAoB;AAClBC,IAAAA,UAAU,EAAEF,KAAK,CAACE,UAAN,CAAiBC,IAAjB,CAAsBV,cAAtB,CADM;AAElBW,IAAAA,WAAW,EAAER,OAAO,CAACC,GAAR,CAAYO;AAFP,GAApB;AAIAJ,EAAAA,KAAK,CACFK,IADH,GAEGC,SAFH,CAEa,GAFb,EAEkBP,aAFlB,EAGGQ,IAHH,CAGQ,UAAUC,eAAV,EAA2B;AAC/BA,IAAAA,eAAe,CAACC,KAAhB,CAAsBC,OAAtB,CAA8B,UAAUC,UAAV,EAAsB;AAClDX,MAAAA,KAAK,CAACK,IAAN,GAAaO,UAAb,CAAwBD,UAAU,CAACE,MAAX,GAAoBC,GAA5C;AACD,KAFD;;AAGA,QAAIN,eAAe,CAACO,SAApB,EAA+B;AAC7BjB,MAAAA,cAAc,CAACU,eAAe,CAACO,SAAjB,CAAd;AACD,KAFD,MAEO;AACLC,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD;AACF,GAZH,EAaGC,KAbH,CAaS,UAAUC,KAAV,EAAiB;AACtBH,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCE,KAAxC;AACD,GAfH;AAgBD;;AACDrB,cAAc","sourcesContent":["import * as admin from \"firebase-admin\";\nrequire(\"dotenv\").config();\nconst serviceAccount = JSON.parse(process.env.serviceAccount);\nfunction deleteAllUsers(nextPageToken) {\n  admin.initializeApp({\n    credential: admin.credential.cert(serviceAccount),\n    databaseURL: process.env.databaseURL,\n  });\n  admin\n    .auth()\n    .listUsers(100, nextPageToken)\n    .then(function (listUsersResult) {\n      listUsersResult.users.forEach(function (userRecord) {\n        admin.auth().deleteUser(userRecord.toJSON().uid);\n      });\n      if (listUsersResult.pageToken) {\n        deleteAllUsers(listUsersResult.pageToken);\n      } else {\n        console.log(\"All users deleted!\");\n      }\n    })\n    .catch(function (error) {\n      console.log(\"Error deleting all users\", error);\n    });\n}\ndeleteAllUsers();\n"],"file":"deleteAllUsers.js"}